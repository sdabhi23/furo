<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../../genindex/" /><link rel="search" title="Search" href="../../../../search/" />

    <meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.dev35"/>
        <title>urllib3.util.timeout - Furo</title>
      <link rel="stylesheet" href="../../../../_static/styles/furo.css?digest=f6a7a815595213d77ba9f22adfa6c6431b72e05f">
    


<style>
  .light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css" />
    <link rel="stylesheet" href="../../../../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../"><div class="brand">Furo</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../">
  
  
  <span class="sidebar-brand-text">Furo</span>
  
</a><div>
  <button onclick="toggleTheme()" class="theme-toggle">Toggle Theme</button>
  <form
    class="sidebar-search-container"
    method="get"
    action="../../../../search/"
  >
    <input class="sidebar-search" placeholder=Search name="q">
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../quickstart/">Quickstart</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../customisation/">Customisation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../customisation/logo/">Adding a logo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../customisation/colors/">Changing colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../customisation/fonts/">Changing fonts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../customisation/landing-page/">Changing landing page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../customisation/sidebar/">Changing sidebar elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../customisation/toc/">Hiding Contents sidebar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../customisation/injecting/">Injecting code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../reference/">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/text-formatting/">Text Formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/admonitions/">Admonitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/api/">API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/code-blocks/">Code Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/hyperlinks/">Hyperlinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/images/">Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/lists/">Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/tables/">Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference/tabs/">Tabs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../recommendations/">Recommendations</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../contributing/">Contributing</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../contributing/workflow/">Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contributing/internals/">Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../contributing/design/">Design Notes</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../kitchen-sink/">Kitchen Sink</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../kitchen-sink/demo/">Paragraph Level Markup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kitchen-sink/lists_tables/">Lists &amp; Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kitchen-sink/really-long/">Really Long Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kitchen-sink/structure/">Structural Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kitchen-sink/structure/#structural-elements-2">Structural Elements 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog/">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../license/">License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pradyunsg/furo">GitHub Repository</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <h1>Source code for urllib3.util.timeout</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># The default socket timeout, used by httplib to indicate that no timeout was</span>
<span class="c1"># specified by the user</span>
<span class="kn">from</span> <span class="nn">socket</span> <span class="kn">import</span> <span class="n">_GLOBAL_DEFAULT_TIMEOUT</span>

<span class="kn">from</span> <span class="nn">..exceptions</span> <span class="kn">import</span> <span class="n">TimeoutStateError</span>

<span class="c1"># A sentinel value to indicate that no timeout was specified by the user in</span>
<span class="c1"># urllib3</span>
<span class="n">_Default</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>


<span class="c1"># Use time.monotonic if available.</span>
<span class="n">current_time</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="s2">"monotonic"</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>


<div class="viewcode-block" id="Timeout"><a class="viewcode-back" href="../../../../reference/api/#urllib3.util.Timeout">[docs]</a><span class="k">class</span> <span class="nc">Timeout</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""Timeout configuration.</span>

<span class="sd">    Timeouts can be defined as a default for a pool:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       timeout = Timeout(connect=2.0, read=7.0)</span>
<span class="sd">       http = PoolManager(timeout=timeout)</span>
<span class="sd">       response = http.request('GET', 'http://example.com/')</span>

<span class="sd">    Or per-request (which overrides the default for the pool):</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       response = http.request('GET', 'http://example.com/', timeout=Timeout(10))</span>

<span class="sd">    Timeouts can be disabled by setting all the parameters to ``None``:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       no_timeout = Timeout(connect=None, read=None)</span>
<span class="sd">       response = http.request('GET', 'http://example.com/, timeout=no_timeout)</span>


<span class="sd">    :param total:</span>
<span class="sd">        This combines the connect and read timeouts into one; the read timeout</span>
<span class="sd">        will be set to the time leftover from the connect attempt. In the</span>
<span class="sd">        event that both a connect timeout and a total are specified, or a read</span>
<span class="sd">        timeout and a total are specified, the shorter timeout will be applied.</span>

<span class="sd">        Defaults to None.</span>

<span class="sd">    :type total: int, float, or None</span>

<span class="sd">    :param connect:</span>
<span class="sd">        The maximum amount of time (in seconds) to wait for a connection</span>
<span class="sd">        attempt to a server to succeed. Omitting the parameter will default the</span>
<span class="sd">        connect timeout to the system default, probably `the global default</span>
<span class="sd">        timeout in socket.py</span>
<span class="sd">        &lt;http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535&gt;`_.</span>
<span class="sd">        None will set an infinite timeout for connection attempts.</span>

<span class="sd">    :type connect: int, float, or None</span>

<span class="sd">    :param read:</span>
<span class="sd">        The maximum amount of time (in seconds) to wait between consecutive</span>
<span class="sd">        read operations for a response from the server. Omitting the parameter</span>
<span class="sd">        will default the read timeout to the system default, probably `the</span>
<span class="sd">        global default timeout in socket.py</span>
<span class="sd">        &lt;http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535&gt;`_.</span>
<span class="sd">        None will set an infinite timeout.</span>

<span class="sd">    :type read: int, float, or None</span>

<span class="sd">    .. note::</span>

<span class="sd">        Many factors can affect the total amount of time for urllib3 to return</span>
<span class="sd">        an HTTP response.</span>

<span class="sd">        For example, Python's DNS resolver does not obey the timeout specified</span>
<span class="sd">        on the socket. Other factors that can affect total request time include</span>
<span class="sd">        high CPU load, high swap, the program running at a low priority level,</span>
<span class="sd">        or other behaviors.</span>

<span class="sd">        In addition, the read and total timeouts only measure the time between</span>
<span class="sd">        read operations on the socket connecting the client and the server,</span>
<span class="sd">        not the total amount of time for the request to return a complete</span>
<span class="sd">        response. For most requests, the timeout is raised because the server</span>
<span class="sd">        has not sent the first byte in the specified time. This is not always</span>
<span class="sd">        the case; if a server streams one byte every fifteen seconds, a timeout</span>
<span class="sd">        of 20 seconds will not trigger, even though the request will take</span>
<span class="sd">        several minutes to complete.</span>

<span class="sd">        If your goal is to cut off any request after a set amount of wall clock</span>
<span class="sd">        time, consider having a second "watcher" thread to cut off a slow</span>
<span class="sd">        request.</span>
<span class="sd">    """</span>

    <span class="c1">#: A sentinel object representing the default timeout value</span>
    <span class="n">DEFAULT_TIMEOUT</span> <span class="o">=</span> <span class="n">_GLOBAL_DEFAULT_TIMEOUT</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">connect</span><span class="o">=</span><span class="n">_Default</span><span class="p">,</span> <span class="n">read</span><span class="o">=</span><span class="n">_Default</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_timeout</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="s2">"connect"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_timeout</span><span class="p">(</span><span class="n">read</span><span class="p">,</span> <span class="s2">"read"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_timeout</span><span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="s2">"total"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_connect</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">"</span><span class="si">%s</span><span class="s2">(connect=</span><span class="si">%r</span><span class="s2">, read=</span><span class="si">%r</span><span class="s2">, total=</span><span class="si">%r</span><span class="s2">)"</span> <span class="o">%</span> <span class="p">(</span>
            <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># __str__ provided for backwards compatibility</span>
    <span class="fm">__str__</span> <span class="o">=</span> <span class="fm">__repr__</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_validate_timeout</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">"""Check that a timeout attribute is valid.</span>

<span class="sd">        :param value: The timeout value to validate</span>
<span class="sd">        :param name: The name of the timeout attribute to validate. This is</span>
<span class="sd">            used to specify in error messages.</span>
<span class="sd">        :return: The validated and casted version of the given value.</span>
<span class="sd">        :raises ValueError: If it is a numeric value less than or equal to</span>
<span class="sd">            zero, or the type is not an integer, float, or None.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">_Default</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">DEFAULT_TIMEOUT</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">cls</span><span class="o">.</span><span class="n">DEFAULT_TIMEOUT</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Timeout cannot be a boolean value. It must "</span>
                <span class="s2">"be an int, float or None."</span>
            <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Timeout value </span><span class="si">%s</span><span class="s2"> was </span><span class="si">%s</span><span class="s2">, but it must be an "</span>
                <span class="s2">"int, float or None."</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">"Attempted to set </span><span class="si">%s</span><span class="s2"> timeout to </span><span class="si">%s</span><span class="s2">, but the "</span>
                    <span class="s2">"timeout cannot be set to a value less "</span>
                    <span class="s2">"than or equal to 0."</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="c1"># Python 3</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Timeout value </span><span class="si">%s</span><span class="s2"> was </span><span class="si">%s</span><span class="s2">, but it must be an "</span>
                <span class="s2">"int, float or None."</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">value</span>

<div class="viewcode-block" id="Timeout.from_float"><a class="viewcode-back" href="../../../../reference/api/#urllib3.util.Timeout.from_float">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_float</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
        <span class="sd">"""Create a new Timeout from a legacy timeout value.</span>

<span class="sd">        The timeout value used by httplib.py sets the same timeout on the</span>
<span class="sd">        connect(), and recv() socket requests. This creates a :class:`Timeout`</span>
<span class="sd">        object that sets the individual timeouts to the ``timeout`` value</span>
<span class="sd">        passed to this function.</span>

<span class="sd">        :param timeout: The legacy timeout value.</span>
<span class="sd">        :type timeout: integer, float, sentinel default object, or None</span>
<span class="sd">        :return: Timeout object</span>
<span class="sd">        :rtype: :class:`Timeout`</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">Timeout</span><span class="p">(</span><span class="n">read</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">connect</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="Timeout.clone"><a class="viewcode-back" href="../../../../reference/api/#urllib3.util.Timeout.clone">[docs]</a>    <span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Create a copy of the timeout object</span>

<span class="sd">        Timeout properties are stored per-pool but each request needs a fresh</span>
<span class="sd">        Timeout object to ensure each one has its own start/stop configured.</span>

<span class="sd">        :return: a copy of the timeout object</span>
<span class="sd">        :rtype: :class:`Timeout`</span>
<span class="sd">        """</span>
        <span class="c1"># We can't use copy.deepcopy because that will also create a new object</span>
        <span class="c1"># for _GLOBAL_DEFAULT_TIMEOUT, which socket.py uses as a sentinel to</span>
        <span class="c1"># detect the user default.</span>
        <span class="k">return</span> <span class="n">Timeout</span><span class="p">(</span><span class="n">connect</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">,</span> <span class="n">read</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_read</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">)</span></div>

<div class="viewcode-block" id="Timeout.start_connect"><a class="viewcode-back" href="../../../../reference/api/#urllib3.util.Timeout.start_connect">[docs]</a>    <span class="k">def</span> <span class="nf">start_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Start the timeout clock, used during a connect() attempt</span>

<span class="sd">        :raises urllib3.exceptions.TimeoutStateError: if you attempt</span>
<span class="sd">            to start a timer that has been started already.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_connect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TimeoutStateError</span><span class="p">(</span><span class="s2">"Timeout timer has already been started."</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_connect</span> <span class="o">=</span> <span class="n">current_time</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_connect</span></div>

<div class="viewcode-block" id="Timeout.get_connect_duration"><a class="viewcode-back" href="../../../../reference/api/#urllib3.util.Timeout.get_connect_duration">[docs]</a>    <span class="k">def</span> <span class="nf">get_connect_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Gets the time elapsed since the call to :meth:`start_connect`.</span>

<span class="sd">        :return: Elapsed time in seconds.</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        :raises urllib3.exceptions.TimeoutStateError: if you attempt</span>
<span class="sd">            to get duration for a timer that hasn't been started.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_connect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TimeoutStateError</span><span class="p">(</span>
                <span class="s2">"Can't get connect duration for timer that has not started."</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">current_time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_connect</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">connect_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the value to use when setting a connection timeout.</span>

<span class="sd">        This will be a positive float or integer, the value None</span>
<span class="sd">        (never timeout), or the default system timeout.</span>

<span class="sd">        :return: Connect timeout.</span>
<span class="sd">        :rtype: int, float, :attr:`Timeout.DEFAULT_TIMEOUT` or None</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_TIMEOUT</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">read_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the value for the read timeout.</span>

<span class="sd">        This assumes some time has elapsed in the connection timeout and</span>
<span class="sd">        computes the read timeout appropriately.</span>

<span class="sd">        If self.total is set, the read timeout is dependent on the amount of</span>
<span class="sd">        time taken by the connect timeout. If the connection time has not been</span>
<span class="sd">        established, a :exc:`~urllib3.exceptions.TimeoutStateError` will be</span>
<span class="sd">        raised.</span>

<span class="sd">        :return: Value to use for the read timeout.</span>
<span class="sd">        :rtype: int, float, :attr:`Timeout.DEFAULT_TIMEOUT` or None</span>
<span class="sd">        :raises urllib3.exceptions.TimeoutStateError: If :meth:`start_connect`</span>
<span class="sd">            has not yet been called on this object.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_TIMEOUT</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_TIMEOUT</span>
        <span class="p">):</span>
            <span class="c1"># In case the connect timeout has not yet been established.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_connect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connect_duration</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_TIMEOUT</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connect_duration</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read</span></div>
</pre></div>
      </article>
      <footer>
        
        <div class="related-pages">
          
          
        </div>

        <div class="related-information">
              Copyright &#169; 2020, Pradyun Gedam
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/tabs.js"></script>
    <script src="../../../../_static/scripts/main.js?digest=dba1104e84029c9bbe823ec0500d3360bfc27ba2"></script></body>
</html>